<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>D3D Rechnungs-Tool PRO</title>
<style>
:root {
--bg-color: #1a1d21;
--card-bg: #24292e;
--accent-blue: #00a8ff;
--text-color: #ffffff;
--border-color: #3f4448;
}

* { box-sizing: border-box; }
body { font-family: 'Segoe UI', sans-serif; background: var(--bg-color); color: var(--text-color); margin: 0; padding: 20px; }

.container {
max-width: 900px;
margin: auto;
background: var(--card-bg);
padding: 30px;
border-radius: 12px;
box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

/* Toolbar */
.no-print { display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; }
button {
padding: 10px 20px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold;
background: var(--accent-blue); color: white; transition: 0.3s;
}
button:hover { opacity: 0.8; }

/* Header Layout */
.header-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; border-bottom: 1px solid var(--border-color); padding-bottom: 20px; }

.logo-area h1 { font-size: 40px; margin: 0; color: var(--accent-blue); letter-spacing: 3px; }
.doc-title { font-size: 24px; text-transform: uppercase; text-align: center; grid-column: 1 / 3; margin: 10px 0; border-bottom: 2px solid var(--accent-blue); }

.meta-box { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; }
.meta-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 13px; }
.meta-row input { background: transparent; border: none; color: white; text-align: right; width: 100px; border-bottom: 1px solid #555; }

/* Address */
.address-section { margin-bottom: 30px; }
.address-section input { background: transparent; border: none; border-bottom: 1px solid var(--border-color); color: white; display: block; width: 100%; padding: 8px 0; margin-bottom: 5px; }

/* Table Style */
table { width: 100%; border-collapse: collapse; margin: 20px 0; }
th { background: var(--accent-blue); color: white; padding: 12px; text-align: left; }
td { border-bottom: 1px solid var(--border-color); padding: 10px; }
input.table-input { background: transparent; border: none; color: white; width: 100%; }

.total-section { text-align: right; font-size: 18px; font-weight: bold; padding: 20px; background: rgba(0,168,255,0.1); border-radius: 8px; }

/* Footer */
.footer { margin-top: 40px; font-size: 10px; color: #aaa; border-top: 1px solid var(--border-color); padding-top: 20px; }
.footer-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }

/* Print Settings */
@media print {
@page { margin: 0; }
body { background: white; color: black; padding: 20mm; }
.container { box-shadow: none; width: 100%; padding: 0; background: white; }
.no-print, .btn-remove { display: none !important; }
input, select, .meta-box { color: black !important; background: white !important; border: none !important; }
th { background: #eee !important; color: black !important; border: 1px solid #000; }
td { border: 1px solid #000; color: black !important; }
.total-section { color: black; border: 1px solid #000; }
.doc-title { color: black; border-bottom: 2px solid black; }
}
</style>
</head>
<body>

<div class="no-print">
<button onclick="window.print()">Drucken / PDF Speichern</button>
<button onclick="addItem()" style="background: #2ecc71;">+ Position</button>
<button onclick="toggleDoc()" id="typeBtn" style="background: #9b59b6;">Zu Angebot wechseln</button>
</div>

<div class="container">
<div class="header-grid">
<div class="logo-area">
<h1>D3D</h1>
<p>Graf-Sempt-Str. 27<br>85601 Forstinning<br>Deutschland</p>
</div>
<div class="meta-box">
<div class="meta-row"><span>Datum:</span><input type="text" id="date"></div>
<div id="invoiceFields">
<div class="meta-row"><span>Rechnungsnr:</span><input type="text" id="invNum" value="2026-001"></div>
<div class="meta-row"><span>Zahlungsziel:</span><input type="number" id="dueDays" value="14" oninput="calcDates()"></div>
<div class="meta-row"><span>Fällig am:</span><span id="dueDateText"></span></div>
</div>
</div>
<div class="doc-title" id="docTitle">Rechnung</div>
</div>

<div class="address-section">
<strong>Empfänger:</strong>
<input type="text" placeholder="Name / Firma">
<input type="text" placeholder="Straße Hausnummer">
<input type="text" placeholder="PLZ Ort">
<input type="text" placeholder="Handynummer (optional)">
</div>

<p id="intro">Wir danken für Ihren Auftrag und berechnen diesen wie folgt:</p>

<table id="itemTable">
<thead>
<tr>
<th style="width:5%">Pos</th>
<th style="width:40%">Bezeichnung</th>
<th style="width:10%">Anzahl</th>
<th style="width:15%">Einheit</th>
<th style="width:15%">Preis (€)</th>
<th style="width:15%">Gesamt</th>
</tr>
</thead>
<tbody id="items"></tbody>
</table>

<div class="total-section">
<div class="no-print" style="font-size: 12px; margin-bottom: 10px;">
Status:
<select id="statusSelect" onchange="updateStatus()" style="background:#333; color:white; border:none;">
<option value="">Offen</option>
<option value="Bereits bezahlt (eBay)">Bereits bezahlt (eBay)</option>
<option value="Betrag in bar erhalten">Betrag in bar erhalten</option>
<option value="Betrag dankend erhalten">Betrag dankend erhalten</option>
</select>
</div>
Rechnungsbetrag: <span id="grandTotal">0.00</span> €
<div id="statusDisplay" style="font-size:14px; color: var(--accent-blue); margin-top:5px;"></div>
</div>

<div class="footer">
<p>Die gelieferte Ware bleibt bis zur vollständigen Bezahlung Eigentum von D3D. Kein Steuerausweis aufgrund der Anwendung der Kleinunternehmerregelung (§ 19 UStG).</p>
<p><strong>Personalisierte und individuell angefertigte Waren sind vom Umtausch ausgeschlossen (§312 Abs. 2 Nr. 1 BGB).</strong></p>
<div class="footer-grid">
<div>
<strong>D3D</strong><br>
Graf-Sempt-Str. 27<br>
85601 Forstinning
</div>
<div>
<strong>Kontakt</strong><br>
E-Mail: kontakt.D3D@gmail.com<br>
Steuer-Nr.: 112/279/00204<br>
Ust-IdNr.: DE455897359-00001
</div>
<div>
<strong>Bankverbindung</strong><br>
IBAN: DE65 1001 1001 2856 6428 24<br>
BIC: NTSBDEB1XXX<br>
GF: Strzoda Dominic
</div>
</div>
</div>
</div>

<script>
const templates = ["Akkuhalter für Makita", "Versand, Verpackung & Versand", "Lager-Halterung"];
let isInvoice = true;

document.getElementById('date').value = new Date().toLocaleDateString('de-DE');

function addItem() {
const row = document.getElementById('items').insertRow();
const pos = document.getElementById('items').rows.length;
row.innerHTML = `
<td>${pos}</td>
<td><input class="table-input" list="tpl" placeholder="Produkt..."></td>
<td><input type="number" class="table-input" value="1" oninput="calc()"></td>
<td><input class="table-input" value="Stück"></td>
<td><input type="number" class="table-input" value="0.00" step="0.01" oninput="calc()"></td>
<td class="row-total">0.00</td>
<datalist id="tpl">${templates.map(t => `<option value="${t}">`).join('')}</datalist>
`;
}

function calc() {
let total = 0;
[...document.getElementById('items').rows].forEach(row => {
const q = row.cells[2].querySelector('input').value;
const p = row.cells[4].querySelector('input').value;
const sub = q * p;
row.cells[5].innerText = sub.toFixed(2);
total += sub;
});
document.getElementById('grandTotal').innerText = total.toFixed(2);
}

function calcDates() {
const days = parseInt(document.getElementById('dueDays').value) || 0;
const d = new Date();
d.setDate(d.getDate() + days);
document.getElementById('dueDateText').innerText = d.toLocaleDateString('de-DE');
}

function toggleDoc() {
isInvoice = !isInvoice;
document.getElementById('docTitle').innerText = isInvoice ? "Rechnung" : "Angebot";
document.getElementById('typeBtn').innerText = isInvoice ? "Zu Angebot wechseln" : "Zu Rechnung wechseln";
document.getElementById('invoiceFields').style.display = isInvoice ? "block" : "none";
document.getElementById('intro').innerText = isInvoice ? "Wir danken für Ihren Auftrag und berechnen diesen wie folgt:" : "Gerne unterbreiten wir Ihnen folgendes Angebot:";
}

function updateStatus() {
document.getElementById('statusDisplay').innerText = document.getElementById('statusSelect').value;
}

addItem(); calcDates();
</script>
</body>
</html>
